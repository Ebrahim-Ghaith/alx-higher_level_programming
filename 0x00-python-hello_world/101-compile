#!/bin/bash

# Check if PYFILE environment variable is set
if [ -z "$PYFILE" ]
then
  echo "PYFILE environment variable is not set"
  exit 1
fi

# Add .py extension to PYFILE if not already present
if [[ $PYFILE != *.py ]]
then
  PYFILE="$PYFILE.py"
fi

# Set output filename
PYCFILE="${PYFILE%.*}c"

# Compile the Python file and check for errors
if python3 -m py_compile "$PYFILE"
then
  echo "Compiling $PYFILE ..."
  mv "$PYCFILE" .
else
  echo "Error: Failed to compile $PYFILE"
  exit 1
fi

